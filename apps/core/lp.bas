BYTE A = 0
BYTE B = 0
BYTE C = 0
BYTE S = 0
BYTE I = 0
BYTE E = 0
@START
	PIDSTAT I,S
	IF S = 2 GOSUB WAKE
	IF S = 6 GOSUB SLEEP
	INC I
	IF I > 0 GOTO START
	GETPID A
	LET #COM[1] = A
	LET #COM[0] = 255
HALT:
	GOTO HALT
	
PRINTP:
	GOSUB PBYTE
	LET A = 58
	GOSUB PRINTA
	RETURN
	
WAKE:
	GOSUB PRINTP
	LET A = 87
	GOSUB PRINTA
	GOTO PRINTN
	
SLEEP:
	GOSUB PRINTP
	LET A = 83
	GOSUB PRINTA
	
PRINTN:
	LET A = 10
	GOSUB PRINTA
	RETURN
	
PRINTA:
	WRITE #SIO,A,E
	IF E > 0 GOTO PRINTERR
	RETURN
	
PRINTERR:
	FORFIT
	GOTO PRINTA
	
PBYTE:
	SPLIT I,C,B
	LET A = B
	GOSUB PHEX
	LET A = C
	GOTO PHEX
	
PHEX:
	LET A =+ 48
	IF A > 57 GOSUB TOLET
	GOTO PRINTA
TOLET:
	LET A =+ 7
	RETURN
	
	